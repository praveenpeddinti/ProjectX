<p #paraAbove>
  Story Detail Page
</p>

<br/>
<button (click)="onClick()">Edit</button>
<div>
  <div>
    <!--Upper Panel-->
    <h1>#{{ticketData?.data?.TicketId}}</h1>
    <div [innerHTML]="ticketData?.data?.Title" id="{{ticketData?.data?.TicketId}}_title" (click)="editTitle()" [hidden]="!showTitleEdit"></div>
    <input type="text" [hidden]="showTitleEdit" (blur)="closeTitleEdit($event.target.value)" value="{{ticketData?.data?.Title}}" />
    <br/>
    <div [innerHTML]="ticketDesc" id="{{ticketData?.data?.TicketId}}_desc" (click)="openDescEditor()" [hidden]="!showDescEditor">
      
      <!--<ckeditor [config]="toolbar"        debounce="500"  >
    </ckeditor>-->
      <!--{{ticketData?.data?.Description}}-->
    </div>
    <!--++++{{ticketDesc}}-->
    <div [hidden]="showDescEditor">
  
      <div style="position: relative">
              <div [ngClass]="{pop_over_bg: fileUploadStatus}"><img *ngIf="fileUploadStatus" src="assets/images/loader.gif" height="20" width="70" alt=""/> </div>
            <ckeditor [config]="toolbarForDetail" [(ngModel)]="ticketEditableDesc" name="ticketEditableDesc" required debounce="500">
            </ckeditor>
      

        <div class="uploadcomponent">
            <div class="uploadbottom"><i class="fa fa-paperclip" aria-hidden="true"></i> File upload</div>
            <input class="transparentinput" type="file" (change)="fileChangeEvent($event)"  multiple  />
        </div>
        
        <button (click)="submitDesc()">Submit</button>
        <a (click)="cancelDesc()">Cancel</a>
      </div>
    </div>
  </div>
  <div *ngFor="let field of fieldsData;let i=index;">
    <!--Left column-->
    <h2>{{field.title}}
      <!--<b style="color: red;" *ngIf="field.required">*</b>-->
</h2>

<span *ngIf="field.readonly" data-text="readonly" id="{{field.elIid}}">{{field.value}}</span>
<div [ngSwitch]="field.renderType" *ngIf="!field.readonly">
  <span (dblclick)="editThisField($event,i,field.elId,field.Id)" [hidden]="!showMyEditableField[i]" data-text="not readonly"
    id="{{field.elId}}">{{(field.value == "") ? '--': field.value}}</span>

  <input *ngSwitchCase="'input'" id='{{field.elId}}_{{i}}' type="{{field.type}}" value="{{field.value}}" [hidden]="showMyEditableField[i]"
    (blur)="restoreField($event.target.value,field.elId,i)">

<!--<ng2-datepicker *ngSwitchCase="'date'" id='{{field.elId}}_{{i}}' [(ngModel)]="field.value" [hidden]="showMyEditableField[i]" (blur)="restoreField($event.target.value,field.elId,i)"></ng2-datepicker>-->

  <select *ngSwitchCase="'select'" id='{{field.elId}}_{{i}}' [hidden]="showMyEditableField[i]" (blur)="selectBlurField(i)"
    (change)="restoreField($event.target,field.elId,i)">
    <option selected value=""> Select Option</option>
        <ng-container *ngFor="let opt of dropList.list;">
        
        <option *ngIf="opt.Id == ((dropList.currentSelectedId == '')?field.valueId : dropList.currentSelectedId)" value="{{opt.Id}}" selected>{{opt.Name}}</option>
        <option *ngIf="opt.Id != ((dropList.currentSelectedId == '')?field.valueId : dropList.currentSelectedId)" value="{{opt.Id}}">{{opt.Name}}</option>
        <!--<option>test3</option>
        <option>test4</option>-->
        </ng-container>
      </select>
      <input *ngSwitchCase="'select'" type="hidden" id="{{field.elId}}_{{i}}_currentSelected">

</div>

</div>


</div>

<!--<ng2-datepicker ></ng2-datepicker>-->

<!--<button (click)="onClick(paraAbove.innerHTML)">Click this</button>-->